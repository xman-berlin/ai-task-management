<div th:fragment="form">
    <form th:object="${task}"
          th:attr="hx-post=${task.id} == null ? '/tasks' : @{/tasks/{id}(id=${task.id})}"
          hx-target="#task-list"
          hx-swap="outerHTML">
        <input type="hidden" th:field="*{id}" />
        <div class="mb-3">
            <label class="form-label">Title</label>
            <input class="form-control" type="text" th:field="*{title}" required maxlength="255" />
        </div>
        <div class="mb-3">
            <label class="form-label">Description</label>
            <textarea class="form-control" rows="3" maxlength="4000" th:field="*{description}"></textarea>
        </div>
        <div class="row mb-3">
            <div class="col">
                <label class="form-label">Priority</label>
                <select class="form-select" th:field="*{priority}">
                    <option value="LOW">LOW</option>
                    <option value="MEDIUM">MEDIUM</option>
                    <option value="HIGH">HIGH</option>
                </select>
            </div>
            <div class="col">
                <label class="form-label">Status</label>
                <select class="form-select" th:field="*{status}">
                    <option value="TODO">TODO</option>
                    <option value="IN_PROGRESS">IN_PROGRESS</option>
                    <option value="DONE">DONE</option>
                </select>
            </div>
            <div class="col">
                <label class="form-label">Due Date</label>
                <input class="form-control" type="datetime-local" name="dueDate"
                       th:value="${task.dueDate != null ? #temporals.format(task.dueDate, 'yyyy-MM-dd''T''HH:mm') : ''}" />
            </div>
        </div>
        <div class="d-flex justify-content-end gap-2">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Save</button>
        </div>
    </form>
</div>
